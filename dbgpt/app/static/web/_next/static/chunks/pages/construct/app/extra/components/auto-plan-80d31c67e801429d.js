(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7537],{15531:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra/components/auto-plan",function(){return a(78174)}])},78174:function(e,l,a){"use strict";a.r(l);var n=a(85893),t=a(76212),s=a(25035),r=a(65654),u=a(84567),i=a(83062),d=a(99859),o=a(42075),c=a(93967),m=a.n(c),p=a(96486),v=a(67294),x=a(83072),f=a(77451);let g=e=>{let{value:l,onChange:a,agents:t,selectedTab:r,setSelectedTab:d}=e;return(0,n.jsx)(u.Z.Group,{className:"grid grid-cols-4 gap-4",onChange:e=>{null==a||a(e)},value:l,children:t.map(e=>(0,n.jsxs)("div",{className:"flex grow h-8 items-center px-3 border ".concat(e.name===r?"border-[#0c75fc]":"border-[#d6d8da]"," rounded-md hover:border-[#0c75fc] cursor-pointer"),onClick:()=>{d(e.name||"")},children:[(0,n.jsx)(u.Z,{value:e.name}),(0,n.jsxs)("div",{className:"flex items-center flex-1 justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"ml-2 mr-1",children:x.agentIcon[e.name||""]}),(0,n.jsx)("span",{className:"text-sm text-[rgba(0,10,26,0.68)] dark:text-[rgba(255,255,255,0.85)]",children:e.label})]}),(0,n.jsx)(i.Z,{title:e.desc,children:(0,n.jsx)(s.Z,{className:"text-sm"})})]})]},e.name))})};l.default=e=>{var l,a,s;let{initValue:u,updateData:i,classNames:c}=e,[_]=d.default.useForm(),h=d.default.useWatch("agent_name",_),[b,j]=(0,v.useState)(""),N=(0,v.useRef)([]),{data:w,loading:y}=(0,r.Z)(async()=>{var e,l;let a=await Promise.all([(0,t.Vx)((0,t.j8)()),(0,t.Vx)((0,t.Vd)()),(0,t.Vx)((0,t.Q5)())]),[,n]=(null==a?void 0:a[0])||[];return N.current=(null==n?void 0:n.map(e=>({agent_name:e.name,llm_strategy:"",llm_strategy_value:"",prompt_template:"",resources:[]})))||[],_.setFieldsValue({agent_name:null==u?void 0:u.map(e=>e.agent_name)}),j((null===(e=null==u?void 0:u.map(e=>e.agent_name))||void 0===e?void 0:e[0])||(null==n?void 0:null===(l=n[0])||void 0===l?void 0:l.name)||""),null!=a?a:[]}),{data:k}=(0,r.Z)(async()=>{let[,e]=await (0,t.Vx)((0,t.xA)({page:1,page_size:1e5}));return null!=e?e:{items:[]}}),T=(0,v.useMemo)(()=>{let[,e]=(null==w?void 0:w[1])||[];return(null==e?void 0:e.length)?e.map(e=>({label:e.name_cn,value:e.value})):[]},[w]),V=(0,v.useMemo)(()=>{let[,e]=(null==w?void 0:w[2])||[];if(null==e?void 0:e.length){let l=e.map(e=>({label:(0,n.jsxs)(o.Z,{children:[x.resourceTypeIcon[e],e]}),value:e}));return(0,p.concat)([{label:(0,n.jsxs)("div",{className:"flex items-center text-sm",children:[x.resourceTypeIcon.all,(0,n.jsx)("span",{className:"ml-2 text-[rgba(0,10,26,0.68)] dark:text-[#ffffffD9]",children:"全部"})]}),value:"all"}],l)}return[]},[w]);return(0,v.useEffect)(()=>{i([y,N.current.filter(e=>null==h?void 0:h.includes(e.agent_name))])},[y,h,i]),(0,n.jsxs)("div",{className:m()(c),children:[(0,n.jsx)(d.default,{form:_,style:{width:"100%"},labelCol:{span:3},wrapperCol:{span:21},children:(0,n.jsx)(d.default.Item,{label:"选择agent",name:"agent_name",required:!0,tooltip:!0,rules:[{required:!0,message:"请先选择agent"}],children:(0,n.jsx)(g,{agents:(null==w?void 0:null===(l=w[0])||void 0===l?void 0:l[1])||[],selectedTab:b,setSelectedTab:j})})}),null==w?void 0:null===(a=w[0])||void 0===a?void 0:null===(s=a[1])||void 0===s?void 0:s.map(e=>(0,n.jsx)(f.default,{classNames:e.name===b?"block":"hidden",updateData:e=>{N.current=N.current.map(l=>l.agent_name===(null==e?void 0:e.agent_name)?{...l,...e}:{...l}),i([y,N.current.filter(e=>null==h?void 0:h.includes(e.agent_name))])},initValue:u,name:e.name,modelStrategyOptions:T,resourceTypeOptions:V,promptList:(null==k?void 0:k.items)||[]},e.name))]})}}},function(e){e.O(0,[3662,7034,7779,3791,7656,2913,5081,8791,1203,6184,9859,2850,2398,4567,9169,1980,418,7434,8047,3106,5265,2783,3761,7582,9946,7263,8576,7906,9071,8510,9774,2888,179],function(){return e(e.s=15531)}),_N_E=e.O()}]);